<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Binary Search Visualizer</title>
	<style>
		body {
			font-family: "Poppins", sans-serif;
			background: #0f172a;
			color: #e2e8f0;
			display: flex;
			flex-direction: column;
			align-items: center;
			padding: 40px 20px;
		}

		h1 {
			color: #38bdf8;
			margin-bottom: 10px;
			text-align: center;
		}

		h2 {
			color: #facc15;
		}

		.description {
			max-width: 800px;
			text-align: center;
			line-height: 1.6;
			margin-bottom: 30px;
			background: #1e293b;
			padding: 20px;
			border-radius: 10px;
			border: 1px solid #334155;
		}

		.controls {
			background: #1e293b;
			padding: 20px;
			border-radius: 10px;
			border: 1px solid #334155;
			width: 90%;
			max-width: 700px;
			margin-bottom: 30px;
			display: flex;
			flex-direction: column;
			gap: 15px;
			align-items: center;
		}

		.control-row {
			display: flex;
			gap: 15px;
			flex-wrap: wrap;
			justify-content: center;
		}

		input {
			padding: 10px 15px;
			font-size: 16px;
			border-radius: 8px;
			border: none;
			outline: none;
			width: 240px;
			background: #0f172a;
			color: white;
			border: 1px solid #334155;
			text-align: center;
		}

		input:focus {
			border-color: #38bdf8;
		}

		button {
			padding: 10px 20px;
			background: #38bdf8;
			color: #0f172a;
			border: none;
			border-radius: 8px;
			font-size: 16px;
			font-weight: bold;
			cursor: pointer;
			transition: 0.3s;
		}

		button:hover {
			background: #0ea5e9;
			transform: scale(1.05);
		}

		.array-wrapper {
			position: relative;
			display: flex;
			flex-direction: column;
			align-items: center;
			margin: 30px 0;
		}

		.array-container {
			display: flex;
			gap: 10px;
			position: relative;
		}

		.box {
			width: 55px;
			height: 55px;
			display: flex;
			justify-content: center;
			align-items: center;
			border-radius: 8px;
			font-weight: bold;
			background: #1e293b;
			border: 2px solid #334155;
			transition: all 0.4s ease;
		}

		.box.current {
			background: #38bdf8;
			color: black;
			transform: scale(1.2);
		}

		.box.found {
			background: #22c55e;
			color: black;
			transform: scale(1.3);
		}

		.box.skip {
			background: #475569;
			opacity: 0.6;
		}

		.pointer-row {
			position: absolute;
			top: 70px;
			display: flex;
			gap: 10px;
			justify-content: center;
			width: 100%;
		}

		.pointer {
			width: 55px;
			height: 25px;
			display: flex;
			justify-content: center;
			align-items: center;
			border-radius: 5px;
			opacity: 0;
			font-weight: bold;
			color: #0f172a;
			transition: all 0.3s;
		}

		.left {
			background: #f87171;
		}

		.mid {
			background: #facc15;
			color: black;
		}

		.right {
			background: #22c55e;
		}

		#steps {
			background: #1e293b;
			border: 1px solid #334155;
			border-radius: 10px;
			padding: 20px;
			width: 90%;
			max-width: 800px;
		}

		#log {
			margin-top: 15px;
			background: #0f172a;
			padding: 10px;
			border-radius: 8px;
			font-family: monospace;
			color: #a5f3fc;
			max-height: 180px;
			overflow-y: auto;
		}

		.btn-group {
			display: flex;
			gap: 10px;
			justify-content: center;
			margin-top: 10px;
		}
	</style>
</head>

<body>
	<h1>üîç Interactive Binary Search Visualizer</h1>

	<div class="description">
		<h2>üß† What is Binary Search?</h2>
		<p>
			Binary Search efficiently finds an element in a
			<strong>sorted array</strong> by dividing the array in half each time.
			It checks the middle value, then decides whether to go left or right.
		</p>
		<p>
			Time Complexity: <strong>O(log n)</strong> | Space Complexity:
			<strong>O(1)</strong>
		</p>
	</div>

	<div class="controls">
		<div class="control-row">
			<input type="text" id="arrayInput" placeholder="Enter numbers (e.g. 2,5,8,12,16)" />
			<button onclick="setArray()">Set Array</button>
		</div>
		<div class="control-row">
			<input type="number" id="targetInput" placeholder="Enter target" />
			<button onclick="startStepMode()">Step Mode</button>
			<button onclick="startAuto()">Auto Play</button>
		</div>
	</div>

	<div class="array-wrapper">
		<div class="array-container" id="array"></div>
		<div class="pointer-row" id="pointerRow"></div>
	</div>

	<div id="steps">
		<h2>ü™ú Steps Log</h2>
		<div id="log"><em>Logs will appear here...</em></div>
		<div class="btn-group" id="stepButtons" style="display: none">
			<button onclick="nextStep()">Next Step ‚ñ∂Ô∏è</button>
			<button onclick="resetVisualizer()">Reset üîÑ</button>
		</div>
	</div>

	<script>
		const arrayContainer = document.getElementById("array");
		const pointerRow = document.getElementById("pointerRow");
		const logBox = document.getElementById("log");
		const stepButtons = document.getElementById("stepButtons");

		let numbers = [2, 5, 8, 12, 16, 23, 38];
		let left,
			right,
			mid,
			target,
			stepMode = false,
			stepQueue = [];
		let boxes = [];

		function createArray() {
			arrayContainer.innerHTML = "";
			pointerRow.innerHTML = "";
			numbers.forEach((num) => {
				const box = document.createElement("div");
				box.classList.add("box");
				box.textContent = num;
				arrayContainer.appendChild(box);
				const ptr = document.createElement("div");
				ptr.classList.add("pointer");
				pointerRow.appendChild(ptr);
			});
			boxes = document.querySelectorAll(".box");
			hidePointers();
			logBox.innerHTML = "<em>Logs will appear here...</em>";
		}

		function startStepMode() {
			target = parseFloat(document.getElementById("targetInput").value);
			if (isNaN(target)) return alert("Enter a valid target!");
			if (!numbers.length) return alert("Set an array first!");
			resetVisualizer();
			stepMode = true;
			log(`üü° Step mode started for target: ${target}`);
			stepButtons.style.display = "flex";
			left = 0;
			right = numbers.length - 1;
			stepQueue = [];
			enqueueSteps();
		}

		async function startAuto() {
			target = parseFloat(document.getElementById("targetInput").value);
			if (isNaN(target)) return alert("Enter a valid target!");
			resetVisualizer();
			log(`‚ñ∂Ô∏è Auto-play started for target: ${target}`);
			await binarySearch(target);
		}

		function enqueueSteps() {
			while (left <= right) {
				const m = Math.floor((left + right) / 2);
				stepQueue.push({ left, mid: m, right });
				if (numbers[m] === target) break;
				else if (numbers[m] < target) left = m + 1;
				else right = m - 1;
			}
			left = 0;
			right = numbers.length - 1;
		}

		function nextStep() {
			if (!stepQueue.length) {
				log("‚úÖ Finished!");
				stepButtons.style.display = "none";
				return;
			}
			const step = stepQueue.shift();
			runStep(step);
		}

		async function runStep({ left, mid, right }) {
			hidePointers();
			setPointer(left, "left");
			setPointer(mid, "mid");
			setPointer(right, "right");

			boxes[mid].classList.add("current");
			log(`Checking mid = ${mid} (value = ${numbers[mid]})`);

			if (numbers[mid] === target) {
				boxes[mid].classList.remove("current");
				boxes[mid].classList.add("found");
				log(`‚úÖ Found ${target} at index ${mid}`);
				stepButtons.style.display = "none";
			} else if (numbers[mid] < target) {
				boxes[mid].classList.add("skip");
				log(`${numbers[mid]} < ${target} ‚Üí Move right`);
			} else {
				boxes[mid].classList.add("skip");
				log(`${numbers[mid]} > ${target} ‚Üí Move left`);
			}
		}

		async function binarySearch(target) {
			let left = 0,
				right = numbers.length - 1;
			while (left <= right) {
				hidePointers();
				const mid = Math.floor((left + right) / 2);
				setPointer(left, "left");
				setPointer(mid, "mid");
				setPointer(right, "right");

				boxes[mid].classList.add("current");
				log(`Checking mid = ${mid} (value = ${numbers[mid]})`);
				await delay(1000);

				if (numbers[mid] === target) {
					boxes[mid].classList.remove("current");
					boxes[mid].classList.add("found");
					log(`‚úÖ Found ${target} at index ${mid}!`);
					return;
				} else if (numbers[mid] < target) {
					boxes[mid].classList.add("skip");
					left = mid + 1;
				} else {
					boxes[mid].classList.add("skip");
					right = mid - 1;
				}
				boxes[mid].classList.remove("current");
				await delay(600);
			}
			log(`‚ùå ${target} not found.`);
			alert("Target not found!");
		}

		function delay(ms) {
			return new Promise((r) => setTimeout(r, ms));
		}
		function log(msg) {
			logBox.innerHTML += `<div>‚û°Ô∏è ${msg}</div>`;
			logBox.scrollTop = logBox.scrollHeight;
		}
		function hidePointers() {
			document.querySelectorAll(".pointer").forEach((p) => {
				p.style.opacity = 0;
				p.className = "pointer";
			});
		}
		function setPointer(i, type) {
			const p = document.querySelectorAll(".pointer")[i];
			if (!p) return;
			p.classList.add(type);
			p.textContent = type.charAt(0).toUpperCase();
			p.style.opacity = 1;
		}
		function resetVisualizer() {
			createArray();
			stepButtons.style.display = "none";
		}

		function setArray() {
			const input = document.getElementById("arrayInput").value.trim();
			if (!input) return alert("Please enter numbers!");
			const userNums = input
				.split(",")
				.map((n) => parseFloat(n.trim()))
				.filter((n) => !isNaN(n));
			numbers = [...new Set(userNums)].sort((a, b) => a - b);
			createArray();
			log(`Array set to: [${numbers.join(", ")}]`);
		}

		createArray();
	</script>
</body>

</html>